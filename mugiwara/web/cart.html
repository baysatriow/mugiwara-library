<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cart</title>
  <link rel="stylesheet" href="assets/css/headerStyle.css" />
  <link rel="stylesheet" href="assets/css/cartStyle.css" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>
  <header class="py-2">
    <div class="container-fluid">
      <div class="header-container d-flex align-items-center">
        <!-- Logo -->
        <div class="logo-container">
              <a href=".">
                  <img src="assets/images/Logo Store.png" width="85" height="50" alt="MugiwaraLibrary" />
              </a>
        </div>

        <!-- Center Section: Kategori + Search -->
        <div class="center-elements px-2">
          <div class="search-section">
            <!-- Dropdown Kategori -->
            <div class="dropdown me-2">
              <button class="btn btn-outline-light dropdown-toggle kategori-btn" type="button" id="dropdownKategori"
                data-bs-toggle="dropdown" aria-expanded="false">
                Kategori
              </button>
              <ul class="dropdown-menu p-2" aria-labelledby="dropdownKategori">
                <li>
                  <div class="mb-2">
                    <div class="input-group input-group-sm">
                      <span class="input-group-text py-0 px-2" style="color: #ae2831; border-color: #ae2831">
                        <i class="bi bi-search small"></i>
                      </span>
                      <input type="text" class="form-control py-1 small" placeholder="Cari Kategori" style="
                            font-size: 0.8rem;
                            color: #ae2831;
                            border-color: #ae2831;
                          " />
                    </div>
                  </div>
                </li>
                <li><a class="dropdown-item" href="#">Novel</a></li>
                <li><a class="dropdown-item" href="#">Majalah</a></li>
                <li><a class="dropdown-item" href="#">Komik</a></li>
              </ul>
            </div>

            <!-- Search Box -->
            <div class="search-container">
              <div class="input-group">
                <span class="input-group-text">
                  <i class="bi bi-search"></i>
                </span>
                <input type="text" class="form-control" placeholder="Mau cari buku apa hari ini?" />
              </div>
            </div>
          </div>
        </div>

        <!-- User Action -->
        <div class="user-actions d-flex align-items-center text-white">
          <span class="me-3 user-name">Jamaludin Isekai</span>
          <a href="cart.html" class="text-white me-3">
            <i class="bi bi-cart fs-4"></i>
          </a>
          <a href="profile.html" class="text-white">
            <i class="bi bi-person-circle fs-4"></i>
          </a>
        </div>
      </div>
    </div>
  </header>

  <div class="container mt-4">
    <h4>Keranjang</h4>
    <!-- KERANJANG (JIKA ADA ITEM) -->
    <div id="cart-section" class="row">
      <div class="form-box d-flex justify-content-between align-items-center border rounded p-2 mb-3">
      <div class="form-check d-flex align-items-center">
        <input class="form-check-input me-2" type="checkbox" id="selectAll" />
        <label class="form-check-label" for="selectAll">
          Semua
        </label>
      </div>
      <button class="btn btn-outline-danger btn-sm">
        <i class="bi bi-trash"></i> Hapus
      </button>
    </div>
      <div class="col-md-8">
        <div class="cart-box d-flex align-items-center justify-content-between mb-3">
          <div class="item-cart d-flex align-items-center">
            <input class="form-check-input me-3" type="checkbox" checked />
            <img src="assets/images/Laut Bercerita.jpg" alt="Book" class="me-3" />
            <div>
              <div><strong>Laut Bercerita</strong></div>
              <div>Rp142.500</div>
            </div>
          </div>
          <div class="d-flex align-items-center">
            <button class="btn btn-outline-danger btn-sm me-2"><i class="bi bi-trash"></i></button>
            <button class="btn btn-outline-secondary btn-sm">-</button>
            <span class="mx-2">1</span>
            <button class="btn btn-outline-secondary btn-sm">+</button>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="cart-box">
          <h6 class="mb-3"><strong>Ringkasan Barang</strong></h6>
          <div class="d-flex justify-content-between">
            <span>Total Harga (<span id="item-count">1 Barang</span>)</span>
            <span>Rp<span id="total-price">142.500</span></span>
          </div>
          <div class="d-flex justify-content-between text-danger mb-2">
            <span>Diskon Belanja</span>
            <span>-Rp<span id="discount">0</span></span>
          </div>
          <hr />
          <div class="d-flex justify-content-between fw-bold">
            <span>Subtotal</span>
            <span>Rp<span id="subtotal">142.500</span></span>
          </div>
          <a href="checkout.html">
          <button class="btn-checkout mt-3 w-100">Checkout</button>
          </a>
        </div>
      </div>
    </div>

    <!-- KERANJANG KOSONG -->
    <div id="empty-cart-section" class="empty-cart d-none">
      <img src="assets/images/emptyCartFeedback.png" alt="Empty Cart" class="my-3" />
      <div class="empty-cart-desc">
        <h5>Keranjang Kamu Kosong :(</h5>
        <p>Kami punya banyak barang yang siap memberi kamu kebahagiaan.</p>
        <p>Yuk, belanja sekarang!</p>
        <button class="button"> <a href="homepage.html"></a>Mulai Belanja</button>
      </div>
    </div>

    <!-- REKOMENDASI -->
    <h4>Rekomendasi Untukmu</h4>
    <div class="carousel-container">
      <button class="carousel-nav left">&#8249;</button>
      <div class="carousel-track">
        <div class="book-card">
          <img src="assets/images/Laut Bercerita.jpg" alt="Laut Bercerita" />
          <p class="author">Leila S. Chudori</p>
          <p class="title">Laut Bercerita</p>
          <p class="price">Rp142.500</p>
        </div>
        <div class="book-card">
          <img src="assets/images/Seperti Dendam.jpg" alt="Seperti Dendam" />
          <p class="author">Eka Kurniawan</p>
          <p class="title">Seperti Dendam, Rindu Harus Dibayar Tuntas</p>
          <p class="price">Rp56.250</p>
        </div>
        <div class="book-card">
          <img src="assets/images/Gadis Kretek.jpg" alt="Gadis Kretek" />
          <p class="author">Ratih Kumala</p>
          <p class="title">Gadis Kretek (Sampul Netflix)</p>
          <p class="price">Rp56.250</p>
        </div>
        <div class="book-card">
          <img src="assets/images/Cantik Luka.jpg" alt="Cantik Itu Luka" />
          <p class="author">Eka Kurniawan</p>
          <p class="title">Novel Cantik Itu Luka</p>
          <p class="price">Rp93.750</p>
        </div>
        <div class="book-card">
          <img src="assets/images/Bagaimana Demokrasi Mati.jpg" alt="Bagaimana Demokrasi Mati" />
          <p class="author">Steven Levitsky & Daniel Ziblatt</p>
          <p class="title">Bagaimana Demokrasi Mati</p>
          <p class="price">Rp73.500</p>
        </div>
      </div>
      <button class="carousel-nav right">&#8250;</button>
    </div>
  </div>
  <footer>
    &copy; 2025 Isekai Byte - Mugiwara Library. All rights reserved.
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const cartSection = document.getElementById("cart-section");
      const emptyCart = document.getElementById("empty-cart-section");
      const itemContainer = cartSection.querySelector(".cart-box");
      const quantityDisplay = itemContainer.querySelector("span.mx-2");
      const minusBtn = itemContainer.querySelector("button:nth-child(2)");
      const plusBtn = itemContainer.querySelector("button:nth-child(4)");
      const deleteBtn = itemContainer.querySelector(".btn-outline-danger");
      const itemCount = document.getElementById("item-count");
      const totalPrice = document.getElementById("total-price");
      const subtotal = document.getElementById("subtotal");

      let quantity = 1;
      const pricePerItem = 142500;

      function updateSubtotal() {
        const total = quantity * pricePerItem;
        totalPrice.textContent = total.toLocaleString("id-ID");
        subtotal.textContent = total.toLocaleString("id-ID");
        itemCount.textContent = `${quantity} Barang`;
      }

      function checkCartEmpty() {
        const hasItems = cartSection.querySelectorAll(".cart-box").length > 1;
        if (!hasItems) {
          cartSection.classList.add("d-none");
          emptyCart.classList.remove("d-none");
        }
      }

      plusBtn.addEventListener("click", () => {
        quantity++;
        quantityDisplay.textContent = quantity;
        updateSubtotal();
      });

      minusBtn.addEventListener("click", () => {
        if (quantity > 1) {
          quantity--;
          quantityDisplay.textContent = quantity;
          updateSubtotal();
        }
      });

      deleteBtn.addEventListener("click", () => {
        itemContainer.remove();
        checkCartEmpty();
      });

      // Cek saat awal halaman dimuat
      updateSubtotal();
      checkCartEmpty();

      // Carousel functionality
      const leftBtn = document.querySelector(".carousel-nav.left");
      const rightBtn = document.querySelector(".carousel-nav.right");
      const track = document.querySelector(".carousel-track");

      const scrollAmount = 300;

      leftBtn.addEventListener("click", () => {
        track.scrollBy({
          left: -scrollAmount,
          behavior: "smooth"
        });
      });

      rightBtn.addEventListener("click", () => {
        track.scrollBy({
          left: scrollAmount,
          behavior: "smooth"
        });
      });
    });

    document.getElementById("selectAll").addEventListener("change", function () {
      const isChecked = this.checked;
      document.querySelectorAll(".item-cart input[type='checkbox']").forEach((cb) => {
        cb.checked = isChecked;
      });
    });

    document.querySelector(".btn-outline-danger").addEventListener("click", function () {
      const checkedItems = document.querySelectorAll(".item-cart input[type='checkbox']:checked");

      checkedItems.forEach(item => {
        item.closest(".cart-box").remove();
      });

      // Cek apakah keranjang kosong setelah penghapusan
      const remainingItems = document.querySelectorAll(".item-cart").length;
      if (remainingItems === 0) {
        document.getElementById("cart-section").classList.add("d-none");
        document.getElementById("empty-cart-section").classList.remove("d-none");
      }
    });
  </script>

</body>

</html>